- Stack: React + TypeScript + Spring Boot + PostgreSQL
- Architecture: Clean Architecture
- API: 統一レスポンス形式、エラーレスポンスは、RFC 9457（Problem Details）仕様に従う

## アーキテクチャ詳細

### バックエンド: Clean Architecture

レイヤー構成：
- **Controller層（Presentation）**: REST APIエンドポイント、リクエスト/レスポンスの変換
- **UseCase層（Application）**: ビジネスロジック、ユースケースの実装
- **Domain層**: エンティティ、ドメインロジック
- **Repository層（Interface）**: データアクセスのインターフェース
- **Infrastructure層**: データベースアクセス、外部サービス連携、ファイルシステムアクセス

### エラーハンドリング

- RFC 9457（Problem Details for HTTP APIs）準拠
- 統一されたエラーレスポンス形式
- 適切なHTTPステータスコードの使用

### データベース

- PostgreSQL
- マイグレーション管理（Flyway または Liquibase推奨）
- UUID を主キーとして使用

### API設計原則

- RESTful API
- バージョニング: `/api/v1/...`
- 統一されたレスポンス形式
- 適切なHTTPメソッドの使用（GET, POST, PUT, DELETE）

## 実装方針

### 全体方針

- **最小実装からスタート**: 複雑な機能は後回しにし、基本機能から段階的に実装
- **シンプルさ優先**: 過度な抽象化を避け、理解しやすいコードを書く
- **段階的な改善**: 動作する最小限のコードを書いてから、リファクタリングで改善

### フロントエンド

#### 技術スタック
- React
- TypeScript
- UIコンポーネント: Material-UI (MUI)
- HTTP クライアント: fetch API または axios

#### 実装方針
- コンポーネントベースの設計
- Material-UIを使用した統一されたUI/UX
- シンプルな状態管理（useState/useEffect から開始）
- 型安全性を重視（TypeScript の活用）

### バックエンド

#### 技術スタック
- Spring Boot
- PostgreSQL
- ファイルストレージ: 初期はローカルファイルシステム、将来的にクラウドストレージへ移行可能な設計

#### 実装方針
- Clean Architecture に基づいた層分離
- 依存性注入の活用
- テスタビリティを考慮した設計

### ブラウザ対応

以下の最新版をサポート：
- Chrome
- Firefox
- Safari
- Edge

## テスト戦略

### 全体方針

- **テストピラミッド**: 単体テスト > 統合テスト > E2Eテストの比率で実装
- **自動化**: CI/CDパイプラインでの自動テスト実行
- **カバレッジ目標**: 単体テスト 80%以上、重要な機能は 90%以上

### フロントエンドテスト

#### 単体テスト
- **フレームワーク**: Vitest + React Testing Library
- **対象**:
  - コンポーネントの振る舞い
  - カスタムフック
  - ユーティリティ関数
- **方針**:
  - ユーザーの操作をシミュレートしたテスト
  - 実装の詳細ではなく、動作に焦点を当てる
  - モック/スタブを適切に使用

#### 統合テスト
- API連携を含むコンポーネントのテスト
- MSW（Mock Service Worker）を使用したAPIモック

### バックエンドテスト

#### 単体テスト
- **フレームワーク**: JUnit 5 + Mockito
- **対象**:
  - UseCase層のビジネスロジック
  - Domain層のドメインロジック
  - ユーティリティクラス
- **方針**:
  - 依存関係をモック化
  - 境界値テスト、エッジケースのカバー
  - テストデータビルダーパターンの活用

#### 統合テスト
- **フレームワーク**: Spring Boot Test + Testcontainers
- **対象**:
  - Repository層（実際のDB接続）
  - Controller層（REST APIエンドポイント）
  - Infrastructure層
- **方針**:
  - Testcontainersで実際のPostgreSQLコンテナを使用
  - @SpringBootTestまたは@DataJpaTestを使用
  - トランザクションのロールバックで各テストを独立化

### E2Eテスト

#### フレームワーク
- **Playwright**: クロスブラウザ対応、高速で信頼性の高いE2Eテスト

#### 対象
- 重要なユーザーフロー（クリティカルパス）
- 画像アップロード・ダウンロードのフロー
- エラーハンドリング

#### 方針
- ユーザーの視点でのシナリオテスト
- テストデータのセットアップ・クリーンアップ
- 本番に近い環境での実行
- スクリーンショット・動画記録

### テストデータ管理

- **バックエンド**: テストフィクスチャ、ファクトリーパターン
- **フロントエンド**: モックデータファクトリー
- **E2E**: シードデータスクリプト

### CI/CD統合

- プルリクエストでの自動テスト実行
- mainブランチへのマージ前に全テスト合格が必須
- テストカバレッジレポートの生成・可視化

