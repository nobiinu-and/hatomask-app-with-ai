---
description: 対話的ヒアリングを通じて機能仕様書(Spec)と受け入れ基準を作成するためのプロンプトテンプレート
---

# 機能仕様(Spec)作成

## 依頼内容
これから新しい機能の仕様書を作成します。対話的にヒアリングしながら、機能要件を明確化し、包括的な機能仕様書と受け入れ基準を作成してください。

## 入力情報
- **機能の概要**: `[実装したい機能の概要を簡単に説明]`
- **テンプレート**: `docs/spec/templates/feature-spec.template.md`

## ヒアリングプロセス

### Phase 1: 機能の全体像把握

まず、以下の質問を通じて機能の全体像を理解してください：

1. **ビジネス価値**
   - この機能は誰のための機能ですか？（対象ユーザー）
   - どのような問題を解決しますか？
   - 実現したい価値は何ですか？

2. **スコープ**
   - 今回のリリースで実装する範囲はどこまでですか？
   - 将来的に追加する可能性のある機能はありますか？
   - 実装しない機能（明示的にスコープ外とするもの）はありますか？

3. **前提条件・依存関係**
   - この機能は他の既存機能に依存していますか？
   - 前提となるシステム状態はありますか？
   - 連携する外部システムやサービスはありますか？

### Phase 2: ユースケースの詳細化

次に、ユーザーの操作フローを明確にしてください：

1. **基本フロー**
   - ユーザーはどのように機能を開始しますか？
   - 主要な操作ステップは何ですか？（順番に列挙）
   - 最終的にユーザーが得る結果は何ですか？

2. **代替フロー**
   - 分岐する操作パターンはありますか？
   - オプショナルな操作はありますか？
   - 途中で中断・キャンセルできますか？

3. **エラーフロー**
   - どのようなエラー状況が考えられますか？
   - エラー時にユーザーに何を伝えますか？
   - リカバリー方法はありますか？

### Phase 3: 機能要件の明確化

各要件について具体的に掘り下げてください：

1. **入力要件**
   - ユーザーが入力する情報は何ですか？
   - 必須項目と任意項目は何ですか？
   - 入力形式に制約はありますか？（フォーマット、長さ、文字種など）
   - 許容される値の範囲は？（最小値、最大値、境界値）

2. **処理要件**
   - システムはどのような処理を行いますか？
   - データの変換やバリデーションは必要ですか？
   - 外部連携が必要な処理はありますか？

3. **出力要件**
   - ユーザーに表示する情報は何ですか？
   - ダウンロードやエクスポートは必要ですか？
   - 通知や確認メッセージは必要ですか？

4. **非機能要件**
   - パフォーマンス要件はありますか？（レスポンスタイム、処理時間）
   - セキュリティ要件はありますか？（認証、認可、データ保護）
   - 可用性要件はありますか？（稼働率、バックアップ）

### Phase 4: UI/UX要件の具体化

ユーザーインターフェースについて詳しく聞いてください：

1. **レイアウト**
   - 画面にどのような要素が配置されますか？
   - 要素の配置順序や位置関係は？
   - レスポンシブ対応は必要ですか？

2. **コンポーネント**
   - どのようなUI部品が必要ですか？（ボタン、入力欄、表など）
   - 状態によって表示が変わる要素はありますか？
   - 有効/無効の切り替えが必要な要素は？

3. **インタラクション**
   - ボタンクリック時の動作は？
   - リアルタイムのフィードバックは必要ですか？
   - ローディング表示は必要ですか？

### Phase 5: 受け入れ基準（Gherkin）の作成

Specification by Example の原則に基づき、具体的なシナリオを作成してください：

1. **正常系シナリオ**
   - 典型的な使用例（Happy Path）
   - 複数の操作を組み合わせた例
   - データのパターン違い（複数のシナリオ）

2. **エラー系シナリオ**
   - バリデーションエラー
   - 権限エラー
   - システムエラー
   - タイムアウト

3. **境界値シナリオ**
   - 最小値/最大値での動作
   - 空データの扱い
   - 特殊文字の扱い

**Gherkinフォーマット**:
```gherkin
Scenario: [具体的なシナリオ名]
  Given [前提条件（具体的な値を含む）]
  When [操作（具体的なアクション）]
  And [追加の操作]
  Then [期待結果（検証可能な形で）]
  And [追加の期待結果]
```

## ヒアリングの進め方

1. **段階的に質問する**: すべてを一度に聞かず、Phase単位で進める
2. **具体例を求める**: 抽象的な回答には「例えば？」と掘り下げる
3. **確認を取る**: 理解した内容を要約して確認する
4. **曖昧さを解消**: 「できるだけ」「なるべく」などの表現は具体的な条件に変換
5. **矛盾をチェック**: 要件間の矛盾や不整合がないか確認

## 出力形式

### 1. テンプレートの使用
`docs/spec/templates/feature-spec.template.md` をベースに仕様書を作成してください。

### 2. 保存先
`docs/spec/features/{連番}_{feature_name}.md`

例: `docs/spec/features/02_face_detection.md`

### 3. 構成要素

すべてのセクションを埋めてください：

- **概要とスコープ**: 機能の目的と実装範囲
- **ユースケース**: 基本フロー、代替フロー
- **機能要件**: 詳細な要件（入力、処理、出力）
- **UI/UX要件**: レイアウト、デザイン、インタラクション
- **受け入れ基準**: Gherkin形式のシナリオ（5つ以上）
- **非機能要件**: パフォーマンス、セキュリティ、可用性
- **将来の拡張候補**: スコープ外だが将来実装したい機能

## 制約事項

1. **具体性**: 曖昧な表現を避け、測定可能な基準を設定
2. **完全性**: 必要な情報が漏れなく記載されている
3. **一貫性**: 要件間で矛盾がない
4. **テスト可能性**: 受け入れ基準が実装後に検証可能
5. **実装中立性**: 技術的な実装方法ではなく、ビジネス要件に焦点を当てる

## 参考ドキュメント

- **サンプル仕様書**: `docs/spec/features/01_photo_upload_download.md`
- **テンプレート**: `docs/spec/templates/feature-spec.template.md`
- **品質基準**: `docs/dev/QUALITY_STANDARDS.md`
