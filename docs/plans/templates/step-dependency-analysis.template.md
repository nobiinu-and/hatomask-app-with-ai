# ステップ依存関係分析: [シナリオ名]

## 基本情報
- **Feature**: [Feature名]
- **Scenario**: [シナリオ名]
- **実装計画**: `docs/plans/[機能仕様ファイル名]_[シナリオ識別子].md`

## ステップ依存関係分析

| ステップ | 分類 | API | 状態依存 | 備考 |
|---------|------|-----|---------|------|
| Given: [テキスト] | フロントのみ | - | なし | [備考] |
| When: [テキスト] | フロントのみ | - | なし | [備考] |
| And: [テキスト] | フロントのみ | - | UI状態 | [備考] |
| Then: [テキスト] | **API依存** | POST /[resource] | UI状態 | [備考] |
| And: [テキスト] | **API依存** | GET /[resource]/:id | **DB状態** | [備考] |
| When: [テキスト] | フロントのみ | - | なし | [備考] |
| Then: [テキスト] | **API依存** | GET /[resource]/:id | **DB状態** | [備考] |

### 分類基準

- **フロントのみ**: API呼び出しなし、UI操作のみ
- **API依存**: バックエンドAPIを呼び出す（フロント+バックエンド両方実装必要）
- **状態依存**:
  - **UI状態**: React State等のフロントエンド内部状態に依存
  - **DB状態**: 前ステップでDBに保存したデータに依存（E2E連続性に影響）

## 依存関係図

```mermaid
graph TD
    A[Given: [テキスト]] -->|フロントのみ| B[When: [テキスト]]
    B -->|フロントのみ| C[And: [テキスト]]
    C -->|POST /[resource]| D[Then: [テキスト]]
    D -->|GET /[resource]/:id<br/>DB状態依存| E[And: [テキスト]]
    E -->|フロントのみ| F[When: [テキスト]]
    F -->|GET /[resource]/:id<br/>DB状態依存| G[Then: [テキスト]]
    
    style A fill:#e1f5e1
    style B fill:#e1f5e1
    style C fill:#e1f5e1
    style D fill:#ffe1e1
    style E fill:#ffe1e1
    style F fill:#e1f5e1
    style G fill:#ffe1e1
```

### 凡例
- 🟢 **緑（#e1f5e1）**: フロントのみ
- 🔴 **赤（#ffe1e1）**: API依存（バックエンド実装必要）

## 重要な依存関係

### DB状態依存の詳細

**[ステップX] → [ステップY]**:
- [ステップX]: [APIメソッド] /[endpoint]
  - DBに[リソース]レコード作成（id: [識別子]）
- [ステップY]: [APIメソッド] /[endpoint]
  - [ステップX]で作成した[リソース]を取得

**E2Eテストへの影響**:
- パターンA（ステップ単位）: [ステップY]実行前に別途セットアップが必要
- パターンB（APIグループ）: 連続実行されるため、E2Eの流れが自然
- パターンC（シナリオ単位）: フロント完成後、バックエンド実装時に一括セットアップ

## API依存ステップの概要

### POST系（データ作成）

| ステップ | エンドポイント | 概要 | 後続の依存 |
|---------|---------------|------|-----------|
| Then: [テキスト] | POST /[resource] | [概要] | [依存するステップ] |

### GET系（データ取得）

| ステップ | エンドポイント | 概要 | 前提条件 |
|---------|---------------|------|---------|
| And: [テキスト] | GET /[resource]/:id | [概要] | [前提となるステップ] |
| Then: [テキスト] | GET /[resource]/:id | [概要] | [前提となるステップ] |

## 補足

[この分析で特に注意すべき点や、ステップ間の依存関係で複雑な部分の説明]
