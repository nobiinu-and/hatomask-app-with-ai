# 実装粒度提案: [シナリオ名]

> **このドキュメントの目的**: 実装粒度の意思決定を記録する  
> 実装戦略の詳細は [`docs/dev/guidelines/vertical-slice.md`](../../dev/guidelines/vertical-slice.md) を参照してください

## 基本情報
- **Feature**: [Feature名]
- **Scenario**: [シナリオ名]
- **依存関係分析**: `docs/plans/[Spec名]_[シナリオ識別子]_dependency.md`
- **実装計画**: `docs/plans/[Spec名]_[シナリオ識別子].md`

## 実装粒度の3パターン比較

| パターン | 粒度 | 対象ステップ | メリット | デメリット | 推奨度 |
|---------|------|-------------|---------|-----------|--------|
| A | ステップ単位 | 1ステップずつ | 差分最小、素早いフィードバック | 状態分断リスク、頻繁な切り替え | ⭐⭐ |
| B | APIグループ単位 | [グループ分け] | 状態連続性確保、適度な粒度 | やや差分大きい | ⭐⭐⭐ |
| C | シナリオ単位 | [全体] | 従来型、手戻り少ない | 差分大、フィードバック遅い | ⭐ |

## 選択パターンと理由

**選択したパターン**: [A/B/C]

**選択理由**:
- [このシナリオでこのパターンを選択した具体的な理由]

---

## パターン別の特徴（参考）

### パターンA: ステップ単位

- **粒度**: 1ステップずつ実装
- **メリット**: 差分最小、素早いフィードバック、レビュー容易
- **デメリット**: E2E状態分断リスク、頻繁な切り替えオーバーヘッド
- **適用ケース**: 各ステップが独立、差分レビュー最優先

### パターンB: APIグループ単位（通常推奨）

- **粒度**: 関連する2-5ステップをグループ化
- **メリット**: E2Eテストの自然な流れ、状態連続性確保、適度な粒度
- **デメリット**: 1サイクルの差分がやや大きい
- **適用ケース**: ステップ間にDB状態依存がある場合（通常はこれ）

### パターンC: シナリオ単位

- **粒度**: シナリオ全体を一括実装
- **メリット**: 従来型フロー、役割分担明確、切り替えなし
- **デメリット**: 差分大、フィードバック遅い、API Contract Firstの利点を活かせない
- **適用ケース**: フロント/バックエンドが完全に独立、差分サイズを気にしない

## 実装グルーピング

### グループ1: [グループ名]（[N]ステップ）

**対象ステップ**:
- [Given/When/Then]: [ステップテキスト]
- [Given/When/Then]: [ステップテキスト]

**実装内容**:
- **フロント**: [概要]
- **バックエンド**: [概要、なければ「なし」]

**API**: [エンドポイントリスト、なければ「なし」]

**グルーピング理由**: [なぜこれらをまとめるのか]

---

_必要に応じて追加のグループを記載してください_

## 実装開始のための確認

### 粒度決定のチェックリスト

- [ ] 依存関係分析を確認した
- [ ] 3パターンのメリット・デメリットを理解した
- [ ] プロジェクトの状況に合わせてパターンを選択した
- [ ] グルーピングをカスタマイズする必要があるか検討した
- [ ] チームメンバーと合意した

### 次のアクション

選択したパターン: **パターン[A/B/C]**

調整内容: [グルーピングのカスタマイズがあれば記載]
