# テストリスト: 写真のアップロードとダウンロード

## テストリストとは

このドキュメントは、Kent BeckのTest-Driven Development（TDD）で提唱されている「テストリスト」の形式で記述されています。

テストリストの目的:
- 実装前に必要なテストケースを洗い出す
- 実装中に頭の中のToDoを外部化し、今取り組むべきことに集中する
- 進捗を可視化する
- 新しいテストケースを思いついたら追加する（リストは成長する）

記号の意味:
- `[ ]` 未実装
- `[x]` 実装完了
- `[~]` スキップ（後回し）
- `[?]` 実装方法を検討中

---

## 受け入れ基準ベースのテストリスト

### Scenario 1: JPEGファイルのアップロードとダウンロード

- **Given** ユーザーがHatoMaskアプリケーションにアクセスしている
  - [ ] ページのタイトルが「HatoMask App」である
  - [ ] ページが完全にロードされる（document.readyState === 'complete'）
  - [ ] コンソールにエラーが出力されていない
  - [ ] ページのレイアウトが崩れていない（基本的なスタイルが適用されている）
- **When** ユーザーが「写真を選択」ボタンをクリックする
  - [ ] 「写真を選択」ボタンが表示されている
  - [ ] 「写真を選択」ボタンが有効化されている（disabledでない）
  - [ ] ボタンをクリックするとファイル選択ダイアログが開く
  - [ ] ファイル選択ダイアログが開いた後もページがフリーズしない
- **And** ユーザーがファイルサイズ5MBのJPEGファイルを選択する
- **Then** アップロードが成功する
- **And** プレビューエリアに選択した画像が表示される
- **When** ユーザーが「ダウンロード」ボタンをクリックする
- **Then** 元の画像がダウンロードされる

### Scenario 2: PNGファイルのアップロードとダウンロード

- **Given** ユーザーがHatoMaskアプリケーションにアクセスしている
- **When** ユーザーが「写真を選択」ボタンをクリックする
- **And** ユーザーがファイルサイズ3MBのPNGファイルを選択する
- **Then** アップロードが成功する
- **And** プレビューエリアに選択した画像が表示される
- **When** ユーザーが「ダウンロード」ボタンをクリックする
- **Then** 元の画像がダウンロードされる

### Scenario 3: 複数回の写真アップロード

- **Given** ユーザーがHatoMaskアプリケーションにアクセスしている
- **When** ユーザーが1枚目のJPEGファイルをアップロードする
- **Then** 1枚目の画像がプレビューエリアに表示される
- **When** ユーザーが「写真を選択」ボタンをクリックする
- **And** ユーザーが2枚目のPNGファイルを選択する
- **Then** アップロードが成功する
- **And** プレビューエリアの画像が2枚目の画像に切り替わる

### Scenario 4: ファイルサイズ超過エラー

- **Given** ユーザーがHatoMaskアプリケーションにアクセスしている
- **When** ユーザーがファイルサイズ11MBのJPEGファイルを選択する
- **Then** エラーメッセージ「ファイルサイズは10MB以下にしてください」が表示される
- **And** 画像はアップロードされない

### Scenario 5: 非対応のファイル形式エラー

- **Given** ユーザーがHatoMaskアプリケーションにアクセスしている
- **When** ユーザーがGIF形式のファイルを選択する
- **Then** エラーメッセージ「JPEG または PNG ファイルを選択してください」が表示される
- **And** 画像はアップロードされない

### Scenario 6: 初期状態のUI確認

- **Given** ユーザーがHatoMaskアプリケーションにアクセスしている
- **Then** 「写真を選択」ボタンが有効化されている
- **And** 「ダウンロード」ボタンが無効化されている
- **And** プレビューエリアが空の状態である

### Scenario 7: アップロード後のUI状態確認

- **Given** ユーザーがHatoMaskアプリケーションにアクセスしている
- **When** ユーザーが写真をアップロードする
- **Then** プレビューエリアに画像が表示される
- **And** 「ダウンロード」ボタンが有効化される

---

## 実装の進め方

1. **まず Scenario 1 を完全に実装する**（Red-Green-Refactorを繰り返す）
2. 他のシナリオは差分実装で進める
3. 新しいテストケースを思いついたら随時追加する
